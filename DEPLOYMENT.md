# ğŸš€ Deployment Guide - Hamkasb.AI

ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ **hamkasb-ai.uz**

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

- [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹Ğ¼ĞµĞ½Ñ‚Ğ°](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹Ğ¼ĞµĞ½Ñ‚Ğ°)
- [ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](#Ğ¿Ñ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
- [Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚](#Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹-ÑÑ‚Ğ°Ñ€Ñ‚)
- [Ğ ÑƒÑ‡Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ](#Ñ€ÑƒÑ‡Ğ½Ğ¾Ğµ-Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ)
- [ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL](#Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°-ssl)
- [ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸](#Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³-Ğ¸-Ğ»Ğ¾Ğ³Ğ¸)
- [ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ](#Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)
- [Troubleshooting](#troubleshooting)

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹Ğ¼ĞµĞ½Ñ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  hamkasb-ai.uz                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Nginx (Port 80/443)                                    â”‚
â”‚  â”œâ”€â”€ / (root)          â†’ Static Landing Page           â”‚
â”‚  â”œâ”€â”€ /demo/*           â†’ Next.js Frontend (Port 3000)  â”‚
â”‚  â””â”€â”€ /api/*            â†’ Elysia API (Port 3001)        â”‚
â”‚                                                          â”‚
â”‚  Docker Containers:                                     â”‚
â”‚  â”œâ”€â”€ hamkasb-web       â†’ Next.js 15 + React            â”‚
â”‚  â””â”€â”€ hamkasb-api       â†’ Bun + Elysia.js               â”‚
â”‚                                                          â”‚
â”‚  External Services:                                     â”‚
â”‚  â”œâ”€â”€ PostgreSQL        â†’ Database                       â”‚
â”‚  â”œâ”€â”€ Qdrant Cloud      â†’ Vector Database               â”‚
â”‚  â”œâ”€â”€ OpenAI API        â†’ LLM & Embeddings              â”‚
â”‚  â””â”€â”€ Vercel Blob       â†’ File Storage                   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞĞ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğµ:
- Git
- SSH Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ hamkasb-ai.uz
- ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ SSH ĞºĞ»ÑÑ‡

### ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ (ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸):
- Ubuntu 20.04+ / Debian 11+
- Docker & Docker Compose
- Nginx
- Git

## âš¡ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env.production Ñ„Ğ°Ğ¹Ğ»

```bash
cd /Users/alex/Projects/pet/hamkasb-ai
cp .env.production.example .env.production
```

ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ `.env.production` Ñ production Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸.

### 2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ .env.production Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€

```bash
scp .env.production root@hamkasb-ai.uz:/opt/hamkasb-ai/.env.production
```

### 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ deployment ÑĞºÑ€Ğ¸Ğ¿Ñ‚

```bash
./deployment/deploy.sh
```

Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
- âœ… Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ Ğ²ÑĞµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (Docker, Nginx, Git)
- âœ… Ğ¡ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµÑ‚/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
- âœ… Ğ¡Ğ¾Ğ±ĞµÑ€ĞµÑ‚ Docker Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- âœ… Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ Nginx
- âœ… ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ database migrations

## ğŸ”§ Ğ ÑƒÑ‡Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚Ğµ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ:

### Ğ¨Ğ°Ğ³ 1: ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ

```bash
ssh root@hamkasb-ai.uz
```

### Ğ¨Ğ°Ğ³ 2: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```bash
# Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
systemctl enable docker
systemctl start docker

# Docker Compose
COMPOSE_VERSION=$(curl -s https://api.github.com/repos/docker/compose/releases/latest | grep 'tag_name' | cut -d'"' -f4)
curl -L "https://github.com/docker/compose/releases/download/${COMPOSE_VERSION}/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# Nginx
apt-get update
apt-get install -y nginx git
systemctl enable nginx
systemctl start nginx
```

### Ğ¨Ğ°Ğ³ 3: ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹

```bash
mkdir -p /opt/hamkasb-ai
cd /opt/hamkasb-ai
git clone https://github.com/alishermuxtarov/hamkasb-ai.git .
```

### Ğ¨Ğ°Ğ³ 4: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ environment variables

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env.production Ñ„Ğ°Ğ¹Ğ»
nano .env.production
```

Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ production Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ (ÑĞ¼. `.env.production.example`).

### Ğ¨Ğ°Ğ³ 5: Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹

```bash
cd /opt/hamkasb-ai

# Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
docker-compose -f docker-compose.production.yml build

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
docker-compose -f docker-compose.production.yml up -d

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
docker-compose -f docker-compose.production.yml ps
```

### Ğ¨Ğ°Ğ³ 6: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Nginx

```bash
# ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
cp deployment/nginx/hamkasb-ai.conf /etc/nginx/sites-available/hamkasb-ai
ln -s /etc/nginx/sites-available/hamkasb-ai /etc/nginx/sites-enabled/

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
nginx -t

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Nginx
systemctl reload nginx
```

### Ğ¨Ğ°Ğ³ 7: ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ database migrations

```bash
docker exec hamkasb-api bun run db:migrate
```

### Ğ¨Ğ°Ğ³ 8: Ğ Ğ°Ğ·Ğ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºÑƒÑ landing page

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ»Ñ landing page
mkdir -p /var/www/hamkasb-landing

# Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ landing page
# (Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ, Ñ‡Ñ‚Ğ¾ Ğ¾Ğ½Ğ° ÑƒĞ¶Ğµ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ)
```

## ğŸ”’ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL (Let's Encrypt)

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Certbot

```bash
apt-get update
apt-get install -y certbot python3-certbot-nginx
```

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚

```bash
certbot --nginx -d hamkasb-ai.uz -d www.hamkasb-ai.uz
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ .env.production Ñ HTTPS URLs

```bash
nano /opt/hamkasb-ai/.env.production
```

Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ:
```bash
NEXT_PUBLIC_APP_URL=https://hamkasb-ai.uz
NEXT_PUBLIC_API_URL=https://hamkasb-ai.uz/api
```

### ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹

```bash
cd /opt/hamkasb-ai
docker-compose -f docker-compose.production.yml restart
```

### ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ°

Certbot Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ cron job Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ:

```bash
systemctl status certbot.timer
```

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

```bash
docker ps --filter name=hamkasb
```

### ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²

```bash
# Ğ’ÑĞµ Ğ»Ğ¾Ğ³Ğ¸
docker-compose -f docker-compose.production.yml logs

# Ğ›Ğ¾Ğ³Ğ¸ API
docker logs hamkasb-api -f

# Ğ›Ğ¾Ğ³Ğ¸ Web
docker logs hamkasb-web -f

# Nginx Ğ»Ğ¾Ğ³Ğ¸
tail -f /var/log/nginx/hamkasb-ai.access.log
tail -f /var/log/nginx/hamkasb-ai.error.log
```

### Health checks

```bash
# API health
curl http://localhost:3001/health

# Web health (Ñ‡ĞµÑ€ĞµĞ· Nginx)
curl http://hamkasb-ai.uz/demo

# Full health check
docker ps --filter name=hamkasb --format "table {{.Names}}\t{{.Status}}"
```

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

```bash
# CPU Ğ¸ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker stats hamkasb-api hamkasb-web

# Ğ”Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾
df -h
docker system df
```

## ğŸ”„ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

```bash
./deployment/deploy.sh
```

### Ğ ÑƒÑ‡Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

```bash
ssh root@hamkasb-ai.uz

cd /opt/hamkasb-ai

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
git fetch origin
git reset --hard origin/main

# ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
docker-compose -f docker-compose.production.yml down
docker-compose -f docker-compose.production.yml build --no-cache
docker-compose -f docker-compose.production.yml up -d

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
docker exec hamkasb-api bun run db:migrate
```

### Zero-downtime deployment (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

Ğ”Ğ»Ñ production Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ¹ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¾Ğ¹:

```bash
# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾
docker-compose -f docker-compose.production.yml up -d --scale web=2 --scale api=2

# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
# (Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ load balancer Ğ² Nginx)
```

## ğŸ› Troubleshooting

### ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
docker-compose -f docker-compose.production.yml logs

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ .env.production
cat .env.production

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹
netstat -tulpn | grep -E '3000|3001'
```

### Database connection errors

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ DATABASE_URL Ğ² .env.production
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ PostgreSQL
docker exec hamkasb-api bun run -e "console.log(process.env.DATABASE_URL)"

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
docker exec hamkasb-api bun run db:migrate
```

### Nginx 502 Bad Gateway

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ñ‹
docker ps

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Nginx
tail -f /var/log/nginx/hamkasb-ai.error.log

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
nginx -t

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Nginx
systemctl restart nginx
```

### Out of disk space

```bash
# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Docker Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
docker system prune -a

# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
truncate -s 0 /var/log/nginx/*.log
docker-compose -f docker-compose.production.yml logs --tail=0
```

### API Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚

```bash
# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ API ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
docker restart hamkasb-api

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ health endpoint
curl http://localhost:3001/health

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
docker logs hamkasb-api --tail=100
```

## ğŸ¯ Best Practices

### Security

- âœ… Ğ’ÑĞµĞ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ HTTPS Ğ² production
- âœ… Ğ”ĞµÑ€Ğ¶Ğ¸Ñ‚Ğµ .env.production Ğ² ÑĞµĞºÑ€ĞµÑ‚Ğµ (Ğ½Ğµ ĞºĞ¾Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ Ğ² git)
- âœ… Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞ¹Ñ‚Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¸ Docker Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ firewall (UFW/iptables)
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ strong passwords Ğ´Ğ»Ñ PostgreSQL

### Performance

- âœ… Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Nginx ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
- âœ… ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ÑŒÑ‚Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ log rotation
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ CDN Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… assets (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

### Backup

```bash
# Backup PostgreSQL
docker exec hamkasb-api pg_dump $DATABASE_URL > backup-$(date +%Y%m%d).sql

# Backup .env.production
cp /opt/hamkasb-ai/.env.production ~/backups/env-$(date +%Y%m%d)
```

## ğŸ“ Support

- **Repository**: https://github.com/alishermuxtarov/hamkasb-ai
- **Documentation**: Ğ¡Ğ¼. WARP.md, SETUP.md, MAKEFILE.md

---

**Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹ Quantum Ğ´Ğ»Ñ AI500! Hackathon 2025** ğŸš€
